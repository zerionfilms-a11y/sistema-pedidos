<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sistema Pedidos - Profissional (Frontend)</title>
<link rel="stylesheet" href="style.css">
<!-- CDN: jsPDF, html2canvas, Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <h2>⚡ Zerion — Sistema</h2>
    <nav>
      <button onclick="navegar('produtos')">Produtos</button>
      <button onclick="navegar('orcamentos')">Orçamentos</button>
      <button onclick="navegar('pedidos')">Pedidos</button>
      <button onclick="navegar('despesas')">Despesas</button>
      <button onclick="navegar('dashboard')">Dashboard</button>
      <hr>
      <button onclick="exportarBackup()">Exportar Backup</button>
      <input id="importFile" type="file" style="display:none" onchange="importarBackup(event)"/>
      <button onclick="document.getElementById('importFile').click()">Importar Backup</button>
    </nav>
  </aside>

  <main class="main">

    <!-- PRODUTOS -->
    <section id="produtos" class="pagina">
      <header><h1>Produtos</h1><button class="primary" onclick="abrirModalProduto()">Novo Produto</button></header>
      <div id="produtosList"></div>
    </section>

    <!-- ORÇAMENTOS -->
    <section id="orcamentos" class="pagina" style="display:none;">
      <header><h1>Orçamentos</h1><button class="primary" onclick="abrirModalOrcamento()">Novo Orçamento</button></header>
      <div id="orcamentosList"></div>
    </section>

    <!-- PEDIDOS -->
    <section id="pedidos" class="pagina" style="display:none;">
      <header><h1>Pedidos</h1></header>
      <div id="pedidosList"></div>
    </section>

    <!-- DESPESAS -->
    <section id="despesas" class="pagina" style="display:none;">
      <header><h1>Despesas</h1><button class="primary" onclick="abrirModalDespesa()">Nova Despesa</button></header>
      <div id="despesasList"></div>
    </section>

    <!-- DASHBOARD -->
    <section id="dashboard" class="pagina" style="display:none;">
      <header><h1>Dashboard</h1></header>
      <div class="cards">
        <div class="card"><h3>Faturamento</h3><p id="cardFaturamento">R$ 0,00</p></div>
        <div class="card"><h3>Despesa</h3><p id="cardDespesa">R$ 0,00</p></div>
        <div class="card"><h3>Lucro</h3><p id="cardLucro">R$ 0,00</p></div>
        <div class="card"><h3>Orçamentos Pendentes</h3><p id="cardOrcPend">0</p></div>
      </div>
      <canvas id="chartVendas" style="max-width:700px;margin-top:20px"></canvas>
    </section>

  </main>
</div>

<!-- Modais -->

<!-- Modal Produto -->
<div id="modalProduto" class="modal" style="display:none">
  <div class="modal-content">
    <h3 id="modalProdutoTitle">Novo Produto</h3>
    <label>Nome<input id="pNome"></label>
    <label>Descrição<input id="pDescricao"></label>
    <label>Preço de Custo<input id="pCusto" type="number" step="0.01"></label>
    <label>Preço de Venda<input id="pPreco" type="number" step="0.01"></label>
    <label>Estoque<input id="pEstoque" type="number" step="1"></label>
    <label>Categoria<input id="pCategoria"></label>
    <label>Imagem (opcional)<input id="pImagem" type="file" accept="image/*"></label>
    <div class="actions">
      <button onclick="fecharModalProduto()">Cancelar</button>
      <button class="primary" onclick="salvarProduto()">Salvar</button>
    </div>
  </div>
</div>

<!-- Modal Orçamento -->
<div id="modalOrcamento" class="modal" style="display:none">
  <div class="modal-content large">
    <h3>Novo Orçamento</h3>
    <div class="row">
      <label>Cliente<input id="oCliente"></label>
      <label>Telefone<input id="oTelefone"></label>
      <label>Validade<input id="oValidade" type="date"></label>
    </div>
    <div class="row">
      <label>Observações<textarea id="oObs"></textarea></label>
    </div>

    <h4>Itens</h4>
    <div class="row">
      <select id="oProdutoSelect"></select>
      <input id="oQtd" type="number" min="1" value="1">
      <button onclick="adicionarItemTemp()">Adicionar Item</button>
    </div>
    <table id="itensTemp" class="table"><thead><tr><th>Produto</th><th>Qtd</th><th>Preço</th><th>Subtotal</th><th></th></tr></thead><tbody></tbody></table>

    <div class="row between">
      <label>Desconto (%)<input id="oDesconto" type="number" value="0"></label>
      <div>
        <button onclick="fecharModalOrcamento()">Cancelar</button>
        <button class="primary" onclick="salvarOrcamento()">Salvar Orçamento</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Despesa -->
<div id="modalDespesa" class="modal" style="display:none">
  <div class="modal-content">
    <h3>Nova Despesa</h3>
    <label>Descrição<input id="dDesc"></label>
    <label>Valor<input id="dValor" type="number" step="0.01"></label>
    <label>Data<input id="dData" type="date"></label>
    <div class="actions">
      <button onclick="fecharModalDespesa()">Cancelar</button>
      <button class="primary" onclick="salvarDespesa()">Salvar</button>
    </div>
  </div>
</div>

<!-- Visualização compacta para gerar PDF -->
<div id="printArea" style="position:fixed;left:-9999px;top:-9999px"></div>

<script src="app.js"></script>
</body>
</html>
